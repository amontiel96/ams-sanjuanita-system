{
    "sourceFile": "src/Controlador/jClsCategorias.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1723875689570,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1723875689570,
            "name": "Commit-0",
            "content": "/*\r\n * To change this license header, choose License Headers in Project Properties.\r\n * To change this template file, choose Tools | Templates\r\n * and open the template in the editor.\r\n */\r\npackage Controlador;\r\n\r\nimport Vista.JIFrmCategorias;\r\nimport Vista.JIFrmCategorias;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.event.KeyAdapter;\r\nimport java.awt.event.KeyEvent;\r\nimport javax.swing.JOptionPane;\r\nimport Modelo.*;\r\nimport java.awt.event.MouseEvent;\r\nimport java.awt.event.MouseListener;\r\n/**\r\n *\r\n * @author Arturo\r\n */\r\npublic class jClsCategorias implements ActionListener, MouseListener {\r\n    JIFrmCategorias frm;\r\n    ClsMCategorias datos=new ClsMCategorias();\r\n    public jClsCategorias(JIFrmCategorias _frm) {\r\n        this.frm = _frm;\r\n        this.frm.jbtnNuevo.setActionCommand(\"nuevo\");\r\n        this.frm.jbtnNuevo.addActionListener(this);\r\n        this.frm.jbtnCerrar.setActionCommand(\"salir\");\r\n        this.frm.jbtnCerrar.addActionListener(this);\r\n        this.frm.jbtnAgregar.setActionCommand(\"agregar\");\r\n        this.frm.jbtnAgregar.addActionListener(this);\r\n        this.frm.jbtnEditar.setActionCommand(\"editar\");\r\n        this.frm.jbtnEliminar.setActionCommand(\"eliminar\");\r\n        this.frm.jbtnEliminar.addActionListener(this);\r\n        this.frm.jbtnEditar.addActionListener(this);\r\n        this.frm.jTblCategorias.addMouseListener(this);\r\n        this.habilitar_botones(\"vacio\");\r\n        this.habilitar_cajas(\"\");\r\n        this.llenartabla();\r\n        this.llenartabla();\r\n        \r\n        this.frm.jtxtBuscar.addKeyListener(new java.awt.event.KeyAdapter() {\r\n            public void keyTyped(java.awt.event.KeyEvent ke){\r\n                buscar(ke);\r\n            }\r\n           \r\n});\r\n        this.frm.jtxtID.addKeyListener(new java.awt.event.KeyAdapter() {\r\n            public void keyTyped(java.awt.event.KeyEvent ke){\r\n                id(ke);\r\n            }\r\n        });\r\n        this.frm.jtxtNombre.addKeyListener(new java.awt.event.KeyAdapter() {\r\n            public void keyTyped(java.awt.event.KeyEvent ke){\r\n                nombre(ke);\r\n            }\r\n        });\r\n        \r\n    }\r\n    \r\n    public void fr_load() {\r\n        this.frm.setVisible(true);\r\n    }\r\nprivate void habilitar_cajas(String estado)\r\n    {\r\n        boolean band;\r\n        if(estado.equals(\"nuevo\"))\r\n        {\r\n            this.frm.jtxtID.setEnabled(true);\r\n            band=true;\r\n            this.frm.jtxtID.requestFocus();\r\n        }\r\n        else\r\n        {\r\n            if(estado.equals(\"editar\"))\r\n            {\r\n            this.frm.jtxtID.setEnabled(false);\r\n            this.frm.jtxtNombre.requestFocus();\r\n            band=true;\r\n            }\r\n            else\r\n            {\r\n            this.frm.jtxtID.setEnabled(false);\r\n            band=false;\r\n            }\r\n        }\r\n           \r\n       \r\n    }\r\n     private void habilitar_botones(String estado)\r\n   {\r\n       if(estado.equals(\"nuevo\") || estado.equals(\"modificar\") )\r\n       {\r\n           this.frm.jbtnNuevo.setEnabled(false);\r\n           this.frm.jbtnAgregar.setEnabled(true);\r\n           this.frm.jbtnEditar.setEnabled(false);\r\n           this.frm.jbtnEliminar.setEnabled(false);\r\n           this.frm.jbtnCerrar.setText(\"Cancelar\");\r\n       }\r\n       else\r\n       {\r\n            if(estado.equals(\"guardar\") || estado.equals(\"eliminar\") || estado.equals(\"datos\") )\r\n            {\r\n                this.frm.jbtnNuevo.setEnabled(true);\r\n                this.frm.jbtnAgregar.setEnabled(false);\r\n                this.frm.jbtnEditar.setEnabled(true);\r\n                this.frm.jbtnEliminar.setEnabled(true);\r\n                this.frm.jbtnCerrar.setText(\"Salir\");\r\n            }\r\n            else\r\n            {\r\n                 if(estado.equals(\"vacio\"))\r\n                 {\r\n                    this.frm.jbtnNuevo.setEnabled(true);\r\n                    this.frm.jbtnAgregar.setEnabled(false);\r\n                    this.frm.jbtnEditar.setEnabled(false);\r\n                    this.frm.jbtnEliminar.setEnabled(false);\r\n                    this.frm.jbtnCerrar.setText(\"Salir\");\r\n                 }               \r\n            \r\n            }\r\n       \r\n       }\r\n   }\r\n    \r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent ae) {\r\n       String btn=ae.getActionCommand();\r\n        switch(btn){\r\n           case \"nuevo\":\r\n              this.habilitar_botones(\"nuevo\");\r\n              this.habilitar_cajas(\"nuevo\");\r\n          break;\r\n            case \"agregar\":\r\n                try\r\n             {\r\n            enviar();\r\n             if(this.datos.guardarProveedor())\r\n              {\r\n                  JOptionPane.showMessageDialog(null,\"Se guardo con exito\");\r\n                  this.llenartabla();\r\n              }\r\n              else\r\n              {\r\n                  JOptionPane.showMessageDialog(null,\"Error al guardar...\");\r\n              }\r\n             }\r\n             catch(Exception e)\r\n             {\r\n                 JOptionPane.showMessageDialog(null, e);\r\n             }\r\n                break;\r\n            case \"editar\":\r\n                 try\r\n             {\r\n            enviar();\r\n             if(this.datos.editar())\r\n              {\r\n                  JOptionPane.showMessageDialog(null,\"Se edito con exito\");\r\n                  this.llenartabla();\r\n              }\r\n              else\r\n              {\r\n                  JOptionPane.showMessageDialog(null,\"Error al editar\");\r\n              }\r\n             }\r\n             catch(Exception e)\r\n             {\r\n                 JOptionPane.showMessageDialog(null, e);\r\n             }\r\n                break;\r\n                case \"eliminar\":\r\n              try\r\n             {\r\n            enviar();\r\n             if(this.datos.eliminar()==true)\r\n              {\r\n                  JOptionPane.showMessageDialog(null,\"Se elimino con exito\");\r\n                  this.llenartabla();\r\n              }\r\n             else\r\n              {\r\n                  JOptionPane.showMessageDialog(null,\"Error al eliminar\");\r\n              }\r\n             }\r\n             catch(Exception e)\r\n             {\r\n                 JOptionPane.showMessageDialog(null, e);\r\n             }\r\n             break;\r\n        }\r\n        \r\n        \r\n        \r\n    }\r\n    private void llenartabla()\r\n    {\r\n           this.frm.jTblCategorias.setModel(datos.llenartabla());\r\n    }\r\n    public void enviar()\r\n     {\r\n     this.datos.setId(this.frm.jtxtID.getText());\r\n             this.datos.setNombre(this.frm.jtxtNombre.getText());\r\n     }\r\n     //validacion buscar\r\n    private void buscar(KeyEvent ke){\r\n        if(this.frm.jtxtBuscar.getText().length()==10)\r\n        {\r\n            ke.consume();\r\n        }\r\n        this.SoloNumeros(ke);\r\n    }\r\n     \r\n     //validacion id\r\n     public void id(KeyEvent ke){\r\n         if (this.frm.jtxtID.getText().length()==10)\r\n        {\r\n            ke.consume();\r\n        }\r\n        this.SoloNumeros(ke);\r\n     }\r\n     //validacion nombre cate\r\n     public void nombre(KeyEvent ke){\r\n          if (this.frm.jtxtNombre.getText().length()==10)\r\n        {\r\n            ke.consume();\r\n        }\r\n        this.SoloLetras(ke);\r\n     }\r\n    \r\n    \r\n     public void SoloNumeros(KeyEvent e) {\r\n        char teclaPulsada = e.getKeyChar();\r\n        if (!Character.isDigit(teclaPulsada)) { \r\n            e.consume(); \r\n            }                     \r\n    }\r\n     public void SoloLetras(KeyEvent e) {\r\n        char teclaPulsada = e.getKeyChar();\r\n        if (Character.isDigit(teclaPulsada)) {\r\n            e.consume(); \r\n            }                      \r\n    }\r\n\r\n    @Override\r\n    public void mouseClicked(MouseEvent me) {\r\n          if(me.getButton()==1)\r\n        {\r\n            int fila=this.frm.jTblCategorias.rowAtPoint(me.getPoint());\r\n           // this.habilitar_botones(\"guardar\");\r\n            if(fila>-1)\r\n            {\r\n                this.frm.jtxtID.setText(String.valueOf(this.frm.jTblCategorias.getValueAt(fila,0)));\r\n                this.frm.jtxtNombre.setText(String.valueOf(this.frm.jTblCategorias.getValueAt(fila,1)));\r\n               \r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void mousePressed(MouseEvent me) {\r\n       \r\n    }\r\n\r\n    @Override\r\n    public void mouseReleased(MouseEvent me) {\r\n        \r\n    }\r\n\r\n    @Override\r\n    public void mouseEntered(MouseEvent me) {\r\n        \r\n    }\r\n\r\n    @Override\r\n    public void mouseExited(MouseEvent me) {\r\n        \r\n    }\r\n}\r\n"
        }
    ]
}