{
    "sourceFile": "src/Modelo/ClsMProductos.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1723876530340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1723876530340,
            "name": "Commit-0",
            "content": "/*\r\n * To change this license header, choose License Headers in Project Properties.\r\n * To change this template file, choose Tools | Templates\r\n * and open the template in the editor.\r\n */\r\npackage Modelo;\r\n\r\nimport Vista.JIFrmProducto;\r\nimport java.io.RandomAccessFile;\r\nimport java.sql.Connection;\r\nimport java.sql.ResultSet;\r\nimport java.sql.ResultSetMetaData;\r\nimport java.sql.SQLException;\r\nimport java.sql.Statement;\r\nimport java.util.logging.Level;\r\nimport java.util.logging.Logger;\r\nimport javax.swing.DefaultComboBoxModel;\r\nimport javax.swing.JOptionPane;\r\nimport javax.swing.table.DefaultTableModel;\r\n\r\n/**\r\n *\r\n * @author Arturo\r\n */\r\npublic class ClsMProductos {\r\n    private String id,nombre,ap,am,descripcion,idmarca,idcategoria,buscar;\r\n\r\n    public String getBuscar() {\r\n        return buscar;\r\n    }\r\n\r\n    public void setBuscar(String buscar) {\r\n        this.buscar = buscar;\r\n    }\r\n   ResultSet resultado;\r\n   JIFrmProducto productos;\r\n    MBD cnn=new MBD();\r\n  public ClsMProductos(JIFrmProducto _productos) {\r\n        this.productos = _productos;\r\n    }\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getNombre() {\r\n        return nombre;\r\n    }\r\n\r\n    public void setNombre(String nombre) {\r\n        this.nombre = nombre;\r\n    }\r\n\r\n    public String getAp() {\r\n        return ap;\r\n    }\r\n\r\n    public void setAp(String ap) {\r\n        this.ap = ap;\r\n    }\r\n\r\n    public String getAm() {\r\n        return am;\r\n    }\r\n\r\n    public void setAm(String am) {\r\n        this.am = am;\r\n    }\r\n\r\n    public String getDescripcion() {\r\n        return descripcion;\r\n    }\r\n\r\n    public void setDescripcion(String descripcion) {\r\n        this.descripcion = descripcion;\r\n    }\r\n\r\n    public String getIdmarca() {\r\n        return idmarca;\r\n    }\r\n\r\n    public void setIdmarca(String idmarca) {\r\n        this.idmarca = idmarca;\r\n    }\r\n\r\n    public String getIdcategoria() {\r\n        return idcategoria;\r\n    }\r\n\r\n    public void setIdcategoria(String idcategoria) {\r\n        this.idcategoria = idcategoria;\r\n    }\r\n\r\n    public int getExistencia() {\r\n        return existencia;\r\n    }\r\n\r\n    public void setExistencia(int existencia) {\r\n        this.existencia = existencia;\r\n    }\r\n    private int existencia;\r\n    \r\n    public boolean guardarProveedor() \r\n    {\r\n        String sql=\"insert into tblproductos values('\"+ this.getId() +\"','\"+ this.getNombre() +\"',\"+this.getExistencia()+\",'\"+this.getDescripcion()+\"','\"+this.getIdmarca()+\"','\"+this.getIdcategoria()+\"')\";\r\n      System.out.println(sql);\r\n     boolean band=false;\r\n        try {            \r\n            cnn.procesos(sql);            \r\n            //band=true;\r\n            resultado= cnn.Consulta_SET(\"SELECT TBLPRODUCTOS WHERE VCH_ID_PRODUCTO='\"+this.getId()+\"'\");\r\n            if (resultado.next())\r\n            {  \r\n                 band=true;   \r\n            }\r\n            else{band=false;}\r\n        } catch (Exception ex) {            \r\n        }\r\n     return band;\r\n  }\r\n     Object[][] dat;\r\n     public DefaultTableModel llenartabla()\r\n  {\r\n      DefaultTableModel dato=null;\r\n      try\r\n      {\r\n          String[] titulos={\"CLAVE\",\"NOMBRE\",\"EXISTENCIA\",\"DECRIPCION\",\"MARCA\",\"CATEGORIA\",\"ESTADO\",\"PRECIO MENU\",\"PRECIO MAYOREO\"};\r\n          String consulta;\r\n          consulta = \"select * from tblproductos\";\r\n          String[] columnas={\"vch_id_producto\",\"vch_nombre\",\"int_existencia\",\"vch_descripcion\",\"vch_id_marca\",\"vch_id_categoria\"};\r\n          dat= cnn.getDatos(consulta, columnas);\r\n          dato= new DefaultTableModel(dat,titulos);\r\n      }catch(Exception ex){}\r\n      return dato;\r\n  }\r\n    public boolean eliminar()\r\n    {\r\n        String sql=\"begin sp_eliminamar('\"+this.getId()+\"'); commit; end;\";\r\n        System.out.println(sql);\r\n        boolean band;\r\n        try\r\n        {\r\n            cnn.procesos(sql);\r\n            band=true;\r\n        }\r\n        catch(Exception e)\r\n        {\r\n            JOptionPane.showMessageDialog(null, e.getMessage());\r\n            band=false;\r\n        }\r\n        return band;\r\n    }\r\n    public boolean editar()\r\n    {\r\n        String sql=\"begin sp_modificamar('\"+this.getId()+\"','\"+this.getNombre()+\"'); commit; end;\";\r\n        System.out.println(sql);\r\n        boolean band;\r\n        try\r\n        {\r\n            cnn.procesos(sql);\r\n            band=true;\r\n        }\r\n        catch(Exception e)\r\n        {\r\n            JOptionPane.showMessageDialog(null, e.getMessage());\r\n            band=false;\r\n        }\r\n        return band;\r\n    }\r\n    public boolean BuscarProducto() throws ClassNotFoundException\r\n   {\r\n       boolean ban=false;\r\n       try {\r\n            String[] titulos={\"CLAVE\",\"NOMBRE\",\"EXISTENCIA\",\"DECRIPCION\",\"MARCA\",\"CATEGORIA\",\"ESTADO\",\"PRECIO MENU\",\"PRECIO MAYOREO\"};\r\n            DefaultTableModel table = new DefaultTableModel();\r\n            resultado = cnn.Consulta_SET(\"select * from tblproductos where vch_id_producto = '\"+this.getBuscar()+\"'\");\r\n            int filas=0,columna=9,i=0;\r\n            while(resultado.next())\r\n            {\r\n                filas++;\r\n            }\r\n            resultado.close();\r\n            resultado =cnn.Consulta_SET(\"select * from tblproductos where vch_id_producto = '\"+this.getBuscar()+\"'\");\r\n            java.lang.Object[][] matriz = new String[filas][columna];\r\n            while(resultado.next())\r\n            {\r\n                matriz[i][0]=resultado.getString(\"vch_id_producto\");\r\n                matriz[i][1]=resultado.getString(\"vch_nombre\");\r\n                matriz[i][2]=resultado.getString(\"int_existencia\");\r\n                matriz[i][3]=resultado.getString(\"vch_descripcion\");\r\n                matriz[i][4]=resultado.getString(\"vch_id_marca\");\r\n                matriz[i][5]=resultado.getString(\"vch_id_categoria\");\r\n                matriz[i][6]=resultado.getString(\"vch_estado\");\r\n                matriz[i][7]=resultado.getString(\"flt_precio_menu\");\r\n                matriz[i][8]=resultado.getString(\"flt_precio_mayo\");\r\n                i++;\r\n                if(i==0){\r\n                    ban=false;\r\n                }\r\n                else{\r\n                    ban=true;}\r\n            }\r\n            resultado.close();\r\n            table.setDataVector(matriz,titulos);\r\n            this.productos.jTblProducto.setModel(table);\r\n        } \r\n        catch (SQLException ex) { ban= false;}\r\n       return ban;\r\n   }\r\n    public void CargarCombos() throws ClassNotFoundException\r\n   {\r\n        try {\r\n            DefaultComboBoxModel modeloCombo1 = new DefaultComboBoxModel();\r\n            resultado= cnn.Consulta_SET(\"SELECT * FROM TBLCATEGORIA\");\r\n            while (resultado.next())\r\n            {  \r\n                modeloCombo1.addElement(resultado.getObject(\"VCH_NOM_CATEGORIA\"));     \r\n            }      \r\n            this.productos.jcmbCategoria.setModel(modeloCombo1);\r\n            resultado.close();\r\n            DefaultComboBoxModel modeloCombo2 = new DefaultComboBoxModel();\r\n            resultado= cnn.Consulta_SET(\"SELECT * FROM TBLMARCA\");\r\n            while (resultado.next())\r\n            {  \r\n                modeloCombo2.addElement(resultado.getObject(\"VCH_NOM_MARCA\"));     \r\n            }      \r\n            this.productos.jcmbMarca.setModel(modeloCombo2);\r\n            resultado.close();\r\n        } catch (SQLException ex) {\r\n            Logger.getLogger(ClsMProductos.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n   }    \r\n}\r\n"
        }
    ]
}